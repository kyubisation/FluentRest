language: csharp
dist: trusty
solution: FluentRestBuilder.sln
env:
  global:
    - DOTNET_SKIP_FIRST_TIME_EXPERIENCE: 1
    - DOTNET_CLI_TELEMETRY_OPTOUT: 1
mono: none
dotnet: 1.0.1
os:  
  - linux
  - osx
branches:  
  only:
    - master
    - dev
    - /^feature\/.*$/
    - /^release\/.*$/
    - /^hotfix\/.*$/
script:
  - sed -e 's/net452;//g' -i .backup */*/*.csproj
  - sed -r 's/(Id="SA(1633|1412)") Action="(Warning|Error)"/\1 Action="Hidden"/g' -i .backup FluentRestBuilder.ruleset
  - dotnet restore
  - dotnet build
  - find ./test/ -iname "*.Test.csproj" -execdir dotnet test \;
  - find ./src/ -iname "*.csproj" -execdir dotnet pack -c Release --version-suffix="ci" \;
